# Youtube channel Waktaverse DASHBOARD

## 구경가기👉 [WAKTAVERSE DASHBOARD](https://waktaverse-dashboard-test.streamlit.app/)

# 🔧TOOL
* Python : Data Preprocessing, EDA, NLP modeling
* Streamlit : visualize, app
* API : Google Cloud Platform(Youtube API V3)


# 📁 디렉토리 

```bash
├── 📁.streamlit
| └── config.toml 
├── 📁csv_data --------- # 수익,이세계아이돌 관련 csv
│ ├── waktaverse_benefit.csv
│ └── 이세계아이돌_video.csv 
├── 📁img
├── 📁model ------------ # 인터넷 용어/댓글들로 학습된 tokenizer 모델  
│ ├── Bilstm.h5
│ └── tokenizer.pickle 
├── 📁pages
│ └── statics.py ------- # 수익, 시청자반응 분석 페이지
├── .gitignore
├── NLP.py ------------- # 시청자 댓글 감정분석에 관한 py 
├── README.md
├── font.css ----------- # font, 일부 css 
├── packages.txt
├── preprocess.py ------ # 데이터 전처리에 관한 py
├── requirements.txt
├── youtube_main.py ---- # 대시보드 메인 페이지
├── yout.py ------------ # youtube API V3 관련 함수
└──
```


# 프로젝트 소개 
![image](https://github.com/KGochae/Waktaverse/assets/86241587/1d6c01d0-b1ea-4e05-ba0d-940f707fb5bd)

* 평소에 즐겨보던 종합게임스트리머 우왁굳님의 유튜브 채널을 분석하고 영상들을 모니터링하기 위한 전용 대시보드를 구성해보았습니다. 총 두개의 chapter 로 구성되어 있습니다😀.

**chapter1. 채널 분석 (statics page)** \
**chpater2. 왁타버스 대시보드 (youtube main page)**


# Chapter1. 채널분석

### 1. 목적

**유튜브의 수익모델의 핵심은 '광고' 입니다.** 업로드된 영상에 붙은 광고가 시청자들에게 많이 노출 된 만큼 수익이 들어오는데요! 
즉, **조회수가 높다**는 것은 **광고에 노출된 횟수가 높다**는 말이므로 **수익과 큰 상관성**이 있다고 볼 수 있습니다.👀 

> 그렇다면 채널을 운영하는 입장에서 **어떤 컨텐츠들이 수익이 좋고** **시청자반응이 활발한지** 분석이 꼭 필요할 것 이라고 생각했습니다. 

### 2. 과제 
> " 지금 보다 채널을 성장시키고 싶습니다. 현재 운영하고있는 채널의 컨텐츠들중에서 어떤 컨텐츠들의 영상을 중점으로 공략해야 할까요? "

### 3. 가설
> 채널을 성장을 위한 가장 큰 두개의 핵심은 **조회수와 시청자들의 참여도** 입니다.
> 이를 위해 몇가지 세워본 가설은 다음과 같습니다!
* 시청자 참여(좋아요, 댓글)가 높은 컨텐츠들이 수익도 높을 것 이다.
* 영상의 길이에 따라 수익에 차이가 있을까?
* 오전,오후 업로드 시간에 따라 수익에 차이가 있을까?

### 4. 데이터 수집 및 전처리 

#### 4-1 데이터 수집 (2021년1월 ~ 2023년8월2일 까지의 데이터)
* '우왁굳의게임방송(본채널)' 'WAKTAVERSE(서브채널)' 👉 youtubeAPI 를 통해 수집

#### 4-2 전처리
* 재생목록(playlist)별로 수집된 데이터와 업로드순으로 수집된 데이터를 결합 (업로드순으로 수집된 데이터에 playlist(컨텐츠이름)를 쉽게 추가하기 위해서)
* 추정수익 계산
> 수익과 비용은 아래의 가정하에 산출하였습니다.

> 영상길이별 광고수
> * 30분 이상: 4개
> * 8분 이상: 2개
> * 나머지: 1개

> CPM
> * 일반영상 CPM = 2022년 기준 평균 3500원
> * shorts CPM = 2023년 기준 평균 120원

> 유튜브 광고 수익
> * 10명중 6명은 광고를 봤다
> * 3500 * (조회수 * 0.6) / 1000) * 0.55(수수료)    

> 편집비용
> * 비용은 편집비용만 고려하였으며 30분이상인 경우 편집되지 않은 풀영상으로 파악하여 비용을 100,000원으로 고정
> * 일반영상 분당 30,000원
> * 쇼츠영상 15,000원   

> 추정수익 = 유튜브 광고 수익 - 편집비용


### 5. EDA 결과
(streamlit page에서 확인이 가능합니다.)

#### 5-1 업로드시간/상관분석  
![image](https://github.com/KGochae/Waktaverse/assets/86241587/508a1cc0-a047-4f78-971c-f804bbe35069)

#### 5-2 컨텐츠별 추정이익 
> 연도/채널 별 영상개수,조회수,추정이익,시청자반응
 
![image](https://github.com/KGochae/Waktaverse/assets/86241587/a0ee8d49-9af7-4474-b0ac-32ed14922f36)

### 6. 다중회귀분석결과
> 목표변수를 benefit(추정이익) 과 reaction(시청자반응)으로 두고 어떤 변수들이 유의하게 영향을 주는지 다중회귀분석을 해보았습니다.

#### 6-1 이익측면
![image](https://github.com/KGochae/Waktaverse/assets/86241587/a296688f-e126-483e-852b-db0121e1876c)

#### 6-2 시청자 반응 측면
![image](https://github.com/KGochae/Waktaverse/assets/86241587/f285e61c-30e3-439d-a11a-cda21ae813e4)


### 6. 결과요약
> 수익과 시청자의 반응의 상관성이 높은 편이지만 컨텐츠 별로 보았을 때는 다르다.
* (수익) 본채널 컨텐츠의 '마인크래프트', '합방 시리즈', 'vrchat'의 비중이 상대적으로 🔥
* (시청자 반응) 영상 길이가 짧은 'Shorts' 와 서브채널의 'WAKTAVERSE : MUSIC (이세계아이돌 MUSIC 포함)' 🔥

> 특히, WAKTAVERSE : MUSIC 의 경우 댓글반응을 높히는데 가장 영향력이 있다.
* 댓글을 남긴다는건 좋아요를 누르는것에 비해 시청자의 수고가 조금 더 들어간다고 생각합니다. 현재 시청자들의 참여도가 가장 높은 컨텐츠라 볼 수 있습니다.
* 또한 Shorts의 경우 조회수 대비 시청자 참여도가 가장 좋았습니다.

> 업로드일을 오전,오후로 나눠봤지만 회귀분석모델에서 유의하지 않은 변수였다.


### 7. (아쉬운점)
아무래도 시간이 지난 영상일수록 조회수가 쌓이는 경향도 있기 때문에 지금 시점까지의 데이터만 갖고 분석한다는 것은 분명한 한계점 이었습니다. 본채널 데이터도 매일 수집해서 각 영상별로 업로드되고 일별 데이터값을 알 수 있다면 더 좋았을 것 같습니다.


# Chapter2. WAKTAVERSE DashBoard
컨텐츠별로 지표를 관리하고 시청자 반응이 어떤지 파악할 수 있도록 대시보드를 구성해 보았습니다.😀 


## 1. GCP 기반 파이프라인 
### 🌏Google Cloud Platform
![image](https://github.com/KGochae/Waktaverse/assets/86241587/60a1bbe0-3d5f-4894-a10c-99f0a97609ec)
> 매일 영상이 올라오고 지표들을 모니터링 하기 위해서 자동적으로 데이터를 수집하고 관리할 수 있다면 좋을 것 같다는 생각이 들었습니다. 

그래서 대표 서버리스 클라우드 시스템 중 GCP를 이용하여 ETL 작업을 수월하게 해봤습니다!

* 구글 클라우드 플랫폼에서 제공하는 cloud function 과 cloud schedule 를 이용하여 매일 오후 18:00 에 데이터가 수집 되도록 했습니다.
* 수집된 데이터는 cloud storage에 자동 저장됩니다.
* cloud storage 와 streamlit을 연결하여 매일 새로운 데이터가 업로드 됩니다.


## 2. 대시보드 구성
 
### 📊 재생목록별 조회수/ 구독자수 증가량 chart
![image](https://github.com/KGochae/Waktaverse/assets/86241587/7dfd978c-ca93-4c82-a390-63199ecead77)


### 🔥 현재 뜨는 컨텐츠 (일간,주간,월간)


* 전일대비 조회수,좋아요 가 높은 영상을 모니터링 할 수 있습니다.  
* 예능영상과 음악부분으로 top3 영상을 볼 수 있습니다.

![image](https://github.com/KGochae/Waktaverse/assets/86241587/4fde8657-cb0e-4071-9e09-e6b842a47c31)

### 👀 뜨는 컨텐츠 영상 반응
* top3 에 들어간 영상들의 시청자반응이 어떤지 한번에 모니터링할 수 있습니다!👀

시청자들이 해당영상을 어떻게 보고있는지 파악하는것에 더 나아가 WATKAVERSE 채널에 주로 등장하는 멤버들중 어떤 멤버들이 해당영상에서 활약하고 있는지 그리고 시청자들이 남긴 댓글의 youtube time tag 데이터를 활용해 시청자들이 가장 재밌게본 구간을 요약해보았습니다.

(유튜브 api를 이용하여 댓글을 수집하며 할당량이 초과된 경우, error 가 발생할 수 있습니다😅)

![image](https://github.com/KGochae/Waktaverse/assets/86241587/33794436-d3e1-4adf-9dc5-3d5272052fbd)

> ##### TOP3 영상 반응 요약  
  * `submit` 클릭시 해당영상의 댓글을 가져옵니다. 
  *  1000개 이상인 경우 좋아요를 1개 이상 받은 댓글들만 분석합니다.
> ##### 감성분석
  * 긍정과 중립/부정으로 댓글을 분석합니다. 
  * 사전에 인터넷, 커뮤니티 댓글로 학습된 [언어모델](https://github.com/KGochae/Text-Analysis)을 이용합니다.
  * 정확도는 85% 입니다. 
> ##### 영상의 하이라이트 및 키워드
  * 시청자가 많이 언급한 장면을 요약합니다.
  * 영상에 많이 언급된 멤버들을 요약합니다.


### 🤡 왁타버스 고정멤버/아카데미 언급량 통계 
우왁굳님의 주 컨텐츠중 하나는 **"고정멤버/아카데미"** 합방입니다. 왁타버스영상에서 어떤 멤버가 시청자들에게 많은 관심을 받고 있는지 확인할 수 있습니다.
시청자들의 언급량이 많다는것은 그만큼 관심을 받고, 재밌어한다는 이유라고 생각하기 때문에 , 시청자의 반응을 잘 끄는 멤버들이 누구인지 파악할 수 있다면 좋을 것 입니다!

> * 2023년1월 부터 9월까지의 왁타버스(서브채널), 우왁굳의게임방송(본채널) 에 '고정멤버/아카데미'와 관련된 영상들의 댓글을 모두 가져왔습니다!
> * 댓글들을 가져와서 멤버들의 키워드량이 높은 멤버 TOP5를 요약합니다.
> * 또한 해당 멤버의 언급이 많은 대표영상들을 볼 수 있습니다.

![image](https://github.com/KGochae/Waktaverse/assets/86241587/7cb32df6-6cdf-4f62-9663-88e7096ab52e)


### 🎧(YOUTUBE) 이세계아이돌 영상 추세
> 6월 카카오웹툰 ost 부터 시작해서 3집 kidding, 이세계 페스티벌 공연까지 요즘 핫한🔥 버츄얼 가수 이세계아이돌과 관련한 영상들이 유튜브에서서 얼마나 증가하고 있는지 추세를 확인해 봤습니다.

![image](https://github.com/KGochae/Waktaverse/assets/86241587/266f4346-529c-49be-9a11-762ac3ea82e8)

### 📊 WAKTAVERSE Chart
> 재생목록별 영상들의 전일/주간 조회수 증가량을 볼 수 있습니다👀

![image](https://github.com/KGochae/Waktaverse/assets/86241587/ac719107-3761-4724-9a09-dede51a737c1)

